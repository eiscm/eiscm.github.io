"use strict";(self.webpackChunkhtms_website=self.webpackChunkhtms_website||[]).push([[9725],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>k});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=p(t),u=a,k=c["".concat(s,".").concat(u)]||c[u]||d[u]||l;return t?r.createElement(k,o(o({ref:n},m),{},{components:t})):r.createElement(k,o({ref:n},m))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5622:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const l={title:"\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",sidebar_position:2},o=void 0,i={unversionedId:"DevelopmentTutorials/PCDevelopmentTutorials/1\u3001\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",id:"DevelopmentTutorials/PCDevelopmentTutorials/1\u3001\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",title:"\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",description:"\u4ed3\u5e93/\u5206\u652f\u4ecb\u7ecd",source:"@site/docs/DevelopmentTutorials/PCDevelopmentTutorials/1\u3001\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8.md",sourceDirName:"DevelopmentTutorials/PCDevelopmentTutorials",slug:"/DevelopmentTutorials/PCDevelopmentTutorials/1\u3001\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",permalink:"/docs/DevelopmentTutorials/PCDevelopmentTutorials/1\u3001\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"\u9879\u76ee\u642d\u5efa\u5e76\u542f\u52a8",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"\u5927\u7eb2-(\u6682\u5b58\u7248\u672c)",permalink:"/docs/DevelopmentTutorials/PCDevelopmentTutorials/"},next:{title:"\u5f00\u53d1",permalink:"/docs/DevelopmentTutorials/PCDevelopmentTutorials/2\u3001\u5f00\u53d1"}},s={},p=[{value:"\u4ed3\u5e93/\u5206\u652f\u4ecb\u7ecd",id:"\u4ed3\u5e93\u5206\u652f\u4ecb\u7ecd",level:3},{value:"\u6784\u5efa\u5de5\u5177 hzero-cli \u811a\u624b\u67b6\u4ecb\u7ecd",id:"\u6784\u5efa\u5de5\u5177-hzero-cli-\u811a\u624b\u67b6\u4ecb\u7ecd",level:3},{value:"Hzero \u6a21\u5757\u914d\u7f6e\u6587\u4ef6",id:"hzero-\u6a21\u5757\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u73af\u5883\u7248\u672c",id:"\u73af\u5883\u7248\u672c",level:3},{value:"\u4ea7\u54c1\u6700\u65b0\u7248\u672c",id:"\u4ea7\u54c1\u6700\u65b0\u7248\u672c",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"hzero \u79c1\u6709\u6e90\u4e0d\u7a33\u5b9a\uff0c\u5982\u679c\u4e0b\u4f9d\u8d56\u6709\u95ee\u9898\u5c31\u6362\u6210http://nexus.saas.hand-china.com/content/groups/srm-npm-group/",id:"hzero-\u79c1\u6709\u6e90\u4e0d\u7a33\u5b9a\u5982\u679c\u4e0b\u4f9d\u8d56\u6709\u95ee\u9898\u5c31\u6362\u6210httpnexussaashand-chinacomcontentgroupssrm-npm-group",level:4},{value:"\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6",id:"\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6",level:3},{value:"alias \u914d\u7f6e",id:"alias-\u914d\u7f6e",level:3},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:3},{value:"\u4ea7\u54c1\u73b0\u6709 packages \u4ecb\u7ecd",id:"\u4ea7\u54c1\u73b0\u6709-packages-\u4ecb\u7ecd",level:3},{value:"\u542f\u52a8",id:"\u542f\u52a8",level:3},{value:"1. \u5355\u6a21\u5757\u542f\u52a8",id:"1-\u5355\u6a21\u5757\u542f\u52a8",level:4},{value:"2. \u5168\u6a21\u5757\u542f\u52a8",id:"2-\u5168\u6a21\u5757\u542f\u52a8",level:4},{value:"\u6253\u5305",id:"\u6253\u5305",level:3},{value:"NGINX \u914d\u7f6e",id:"nginx-\u914d\u7f6e",level:4},{value:"\u53d1\u5e03",id:"\u53d1\u5e03",level:3}],m={toc:p};function c(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"\u4ed3\u5e93\u5206\u652f\u4ecb\u7ecd"},"\u4ed3\u5e93/\u5206\u652f\u4ecb\u7ecd"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u9879\u76ee\u4e3a saas \u5de5\u7a0b(saas \u5de5\u7a0b)",(0,a.kt)("br",{parentName:"li"}),(0,a.kt)("a",{parentName:"li",href:"https://code.choerodon.com.cn/happs-tms-op/htms-saas-front"},"saas \u5de5\u7a0b")),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u9879\u76ee\u4e3a op \u5de5\u7a0b(\u4f7f\u7528 demo \u5de5\u7a0b\u8fdb\u884c\u5f00\u53d1, \u9009\u62e9\u5bf9\u5e94\u7248\u672c\u7684\u5206\u652f\u4ee3\u7801\u5373\u53ef)",(0,a.kt)("br",{parentName:"li"}),(0,a.kt)("a",{parentName:"li",href:"https://code.choerodon.com.cn/happs-tms-op/htms-op-front-demo"},"demo \u5de5\u7a0b\u5730\u5740")),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679cgit\u4ed3\u5e93\u6ca1\u6709\u6743\u9650\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u4f01\u4e1a\u5fae\u4fe1\u4ea7\u54c1\u6280\u672f\u5bf9\u63a5\u7fa4\u4e2d\u63d0\u51fa")),(0,a.kt)("h3",{id:"\u6784\u5efa\u5de5\u5177-hzero-cli-\u811a\u624b\u67b6\u4ecb\u7ecd"},"\u6784\u5efa\u5de5\u5177 hzero-cli \u811a\u624b\u67b6\u4ecb\u7ecd"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://open.hand-china.com/document-center/doc/component/401/13770?doc_id=31279&doc_code=31279"},"hzero-cli")),(0,a.kt)("h3",{id:"hzero-\u6a21\u5757\u914d\u7f6e\u6587\u4ef6"},"Hzero \u6a21\u5757\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("p",null,"\u5fae\u524d\u7aef\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u6709\u4e24\u4e2a\uff0c \u7b2c\u4e00\u4e2a\u662f\u7236\u9879\u76ee\u52a0\u8f7d\u5b50\u6a21\u5757\u7684\u914d\u7f6e\u6587\u4ef6\uff0c \u7b2c\u4e8c\u4e2a\u662f\u6bcf\u4e2a\u5b50\u6a21\u5757\u4fe1\u606f\u7684\u914d\u7f6e\u6587\u4ef6\u3002"),(0,a.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\u540d\u90fd\u662f .hzerorc.js \u6216\u8005 .hzerorc.json, \u5982\u679c\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u90fd\u5b58\u5728\u662f\uff0c\u5c31\u4f1a\u5408\u5e76\u4e24\u4e2a\u6587\u4ef6\u7684\u914d\u7f6e\u3002"),(0,a.kt)("p",null,"\u5fae\u524d\u7aef\u914d\u7f6e\u6587\u4ef6\u8bf4\u660e:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7236\u5de5\u7a0b\u5fae\u524d\u7aef\u52a0\u8f7d: ",(0,a.kt)("inlineCode",{parentName:"p"},".hzerorc.js")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  \"packages\": [\n    {\"name\": \"hzero-front-demo-demo1\"},\n    {\"name\": \"hzero-front-hiam\"},\n    {\n      \"name\": \"test-module1\",\n      \"external\": true,\n      \"publicUrl\": 'http://hzero-front.jd1.jajabjbj.top/', // \u8fd9\u91cc\u8868\u793a\u5f15\u7528\u5916\u90e8\u5fae\u524d\u7aef\u6a21\u5757\n    },\n    alias: {}, // webpack alias \u914d\u7f6e, alias \u7684\u503c\u53ef\u4ee5\u662f string \u8868\u793a\u6307\u5411\u914d\u7f6e\u6587\u4ef6\n    theme: {}, // less \u53d8\u91cf\u914d\u7f6e, theme \u7684\u503c\u53ef\u4ee5\u662f string \u8868\u793a\u6307\u5411\u914d\u7f6e\u6587\u4ef6\n    hzeroBoot: 'hzero-boot/lib/pathInfo', // hzero\u5165\u53e3\u6587\u4ef6\u4fe1\u606f\u914d\u7f6e\n    dllConfig: { // dllConfig \u914d\u7f6e\n      common: {\n        priority: 100,\n        packages: ['react','react-dom','dva','dva/router','dva/saga','dva/fetch','hzero-ui','choerodon-ui','choerodon-ui/pro','core-js'],\n      },\n      vendorsGraph: {\n        packages: ['echarts'],\n      },\n      vendors: {\n        packages: ['lodash','lodash-decorators','react-intl-universal','axios','uuid','numeral','react-cropper','cropperjs',]\n      }\n    },\n    splitChunks:{ /* ... */} // chunks \u4f18\u5316\u914d\u7f6e \u53c2\u8003: https://webpack.js.org/plugins/split-chunks-plugin/#optimizationsplitchunks\n  ]\n}\n")),(0,a.kt)("p",{parentName:"li"},"\u914d\u7f6e\u9879\u8bf4\u660e\uff1a"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"packages: \u4f9d\u8d56\u5b50\u6a21\u5757\u4fe1\u606f\u914d\u7f6e",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"name: ","[string]"," \u5fae\u524d\u7aef\u5b50\u5e94\u7528\u7684\u5305\u540d\uff0c \u8fd9\u91cc\u53ef\u4ee5\u586b\u5199 package.josn \u4e0b\u7684 name \u5b57\u6bb5\u503c\uff0c \u6784\u5efa\u811a\u672c\u4f1a\u5148\u5728 packages \u76ee\u5f55\u4e0b\u67e5\u627e\u5bf9\u5e94\u7684\u5305\uff0c\u82e5\u65e0\u4e0e\u4e4b\u76f8\u5bf9\u5e94\u65f6\uff0c\u5219\u4f1a\u5728 node_modelus \u7ee7\u7eed\u67e5\u627e\u8be5\u5b50\u6a21\u5757\u7684\u5185\u5bb9\u8fdb\u884c\u5fae\u524d\u7aef\u5b50\u6a21\u5757\u6253\u5305\u3002"),(0,a.kt)("li",{parentName:"ul"},"external: \u662f\u5426\u4ece\u5916\u90e8\u5730\u5740\u52a0\u8f7d\u5fae\u524d\u7aef\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"publicUrl: \u52a0\u8f7d\u5916\u90e8\u6a21\u5757\u5fae\u524d\u7aef\u6a21\u5757\u7684 publicUrl"))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5b50\u6a21\u5757\u524d\u7aef\u4fe1\u606f\u914d\u7f6e\u6587\u4ef6: ",(0,a.kt)("inlineCode",{parentName:"p"},"packages/xxx/.hzerorc.json")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "package": {\n    "initLoad": false,\n    "indexRouter": "/hzero-front-demo-demo1/hello",\n    "publicUrl": "/",\n    "registerRegex": "\\\\/hzero-front-demo-demo1\\\\/"\n  }\n}\n')),(0,a.kt)("p",{parentName:"li"},"\u914d\u7f6e\u9879\u8bf4\u660e\uff1a"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"package: \u5b50\u6a21\u5757\u53d1\u5e03\u4fe1\u606f\u914d\u7f6e",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"indexRouter : ","[string]"," \u9996\u9875\u8def\u7531\u3002"),(0,a.kt)("li",{parentName:"ul"},"registerRegex: ","[string]"," \u6307\u5b9a\u52a0\u8f7d\u6539\u5fae\u524d\u7aef\u5b50\u6a21\u5757\u7684 pathname \u89c4\u5219\uff0c\u5982\u679c\u5b58\u5728\u8be5\u503c\uff0c\u5f53 pathname \u5339\u914d\u8fd9\u4e2a\u89c4\u5219\u65f6\u52a0\u8f7d\u5bf9\u5e94\u7684\u5fae\u524d\u7aef\u5e94\u7528\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u9ed8\u8ba4\u52a0\u8f7d\u5fae\u524d\u7aef\u5b50\u5e94\u7528.")))))),(0,a.kt)("h3",{id:"\u73af\u5883\u7248\u672c"},"\u73af\u5883\u7248\u672c"),(0,a.kt)("p",null,"\u73af\u5883\u7248\u672c\u53c2\u8003"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"node 16.15.1\nnpm  8.11.0\nyarn 1.22.19\nlerna 5.1.6\n")),(0,a.kt)("h3",{id:"\u4ea7\u54c1\u6700\u65b0\u7248\u672c"},"\u4ea7\u54c1\u6700\u65b0\u7248\u672c"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://open.hand-china.com/document-center/doc/product/10081/10752?doc_id=265607&doc_code=140961"},"\u4ea7\u54c1\u7248\u672c\u66f4\u65b0\u8bf4\u660e")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"tms-front@1.9.5\ntms-front-hdms@1.9.5\ntms-front-hpes@1.9.5\ntms-front-htms@1.9.5\n")),(0,a.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,a.kt)("h4",{id:"hzero-\u79c1\u6709\u6e90\u4e0d\u7a33\u5b9a\u5982\u679c\u4e0b\u4f9d\u8d56\u6709\u95ee\u9898\u5c31\u6362\u6210httpnexussaashand-chinacomcontentgroupssrm-npm-group"},"hzero \u79c1\u6709\u6e90\u4e0d\u7a33\u5b9a\uff0c\u5982\u679c\u4e0b\u4f9d\u8d56\u6709\u95ee\u9898\u5c31\u6362\u6210",(0,a.kt)("a",{parentName:"h4",href:"http://nexus.saas.hand-china.com/content/groups/srm-npm-group/"},"http://nexus.saas.hand-china.com/content/groups/srm-npm-group/")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"lerna bootstrap\nyarn run transpile\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u6ce8\u610f:"),(0,a.kt)("ol",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ol"},"\u6267\u884c\u5b8c lerna bootstrap \u4f1a\u5728 node_modules \u4e0b\u9762\u751f\u6210\u4e00\u4e2a hzero-front-demo-common \u7684\u8f6f\u94fe\u63a5\uff0c\u94fe\u63a5\u6307\u5411 packages/hzero-front-demo-common"),(0,a.kt)("li",{parentName:"ol"},"\u6240\u4ee5\u5728\u5176\u4ed6\u5b50\u6a21\u5757\u91cc\u9762\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528 hzero-front-demo-common \u6a21\u5757\u7684\u6587\u4ef6\uff0c \u53ef\u4ee5\u628a hzero-front-demo-common \u770b\u6210\u4e00\u4e2a\u516c\u5171\u4f9d\u8d56"),(0,a.kt)("li",{parentName:"ol"},"\u6267\u884c\u5b8c lerna run transpile \u4e4b\u540e\u4f1a\u751f\u6210 packages/hzero-front-demo-common/lib \u6587\u4ef6\u5939, \u6a21\u5757\u4e4b\u95f4\u7684\u76f8\u4e92\u4f9d\u8d56\u90fd\u662f\u901a\u8fc7 lib \u76ee\u5f55\u66b4\u9732\u51fa\u53bb\u7684\uff0c\u5982\u679c lib \u6587\u4ef6\u7684\u4ee3\u7801\u66f4\u65b0\u4e86 ,\u6539\u52a8\u7684\u4ee3\u7801\u624d\u4f1a\u751f\u6548"),(0,a.kt)("li",{parentName:"ol"},"\u6ce8\u610f dll \u4e0d\u5b58\u5728\u65f6\uff0c hzero-cli \u4f1a\u81ea\u52a8\u5e2e\u4f60\u6267\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"yarn run build:dll")," ,\u4f46\u662f\u5982\u679c\u4f60\u7684 npm \u4f9d\u8d56\u66f4\u65b0\u4e86 \u60f3\u5237\u65b0 dll \uff0c\u9700\u8981\u624b\u52a8\u8fd0\u884c\u4e00\u6b21 ",(0,a.kt)("inlineCode",{parentName:"li"},"yarn run build:dll")),(0,a.kt)("li",{parentName:"ol"},"\u4fee\u6539\u4e86 PUBLIC_URL \u73af\u5883\u53d8\u91cf\u4e4b\u540e, \u7531\u4e8e ",(0,a.kt)("inlineCode",{parentName:"li"},"src/config/theme.js")," \u4e2d\u7684\u6570\u636e\u4f1a\u76f4\u63a5\u7f16\u8bd1\u5230 dll\uff0c\u5f71\u54cd dll \u5185\u5bb9, \u6240\u4ee5\u5982\u679c\u60f3\u66f4\u65b0 dll \u4e2d\u7684 PUBLIC_URL, \u9700\u8981\u91cd\u65b0\u8fd0\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"yarn build:dll")),(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u4f60\u60f3\u5f00\u53d1\u8c03\u8bd5\u65f6\u80fd\u8c03\u8bd5 dva\u3001redux, dll \u6587\u4ef6 \u80fd\u663e\u793a sourcemap , \u9700\u8981\u624b\u52a8\u6267\u884c\u4e00\u6b21 ",(0,a.kt)("inlineCode",{parentName:"li"},"yarn run build:dll-dev")))),(0,a.kt)("h3",{id:"\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6"},"\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("p",null,"\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"src/config/.env.yml")," : \u9ed8\u8ba4\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"src/config/.env.${NODE_PROFILE}.yml")," : \u6839\u636e\u73af\u5883\u53d8\u91cf NODE_PROFILE \u7684\u503c\u5207\u6362\u914d\u7f6e\u6587\u4ef6, \u6bd4\u5982\u5f53 NODE_PROFILE=development \u65f6, .env.development.yml \u4f1a\u751f\u6548, \u8be5\u6587\u4ef6\u7684\u4f18\u5148\u7ea7\u6bd4 .env.yml \u9ad8\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"src/config/.env.${NODE_PROFILE}.local.yml")," : \u672c\u5730\u73af\u5883\u53d8\u91cf, \u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u914d\u7f6e\u6587\u4ef6, \u8be5\u914d\u7f6e\u6587\u4ef6\u4e0d\u4f1a\u8fdb\u5165 git \u7684\u7248\u672c\u7ba1\u7406\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"packages/xxx/src/config/.env.yml")," : \u5b50\u6a21\u5757\u72ec\u7acb\u9ed8\u8ba4\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\uff0c\u4f18\u5148\u7ea7\u6bd4\u7236\u6a21\u5757\u9ad8\uff0c\u4f46\u662f\u53ea\u4f1a\u5f71\u54cd\u5f53\u524d\u5b50\u6a21\u5757")),(0,a.kt)("p",null,"\u73af\u5883\u53d8\u91cf\u8bf4\u660e:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"API_HOST")," : \u540e\u7aef\u63a5\u53e3\u5730\u5740\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"PACKAGE_PUBLIC_URL")," : \u52a0\u8f7d\u72ec\u7acb\u90e8\u7f72\u7684\u5b50\u6a21\u5757\u8def\u5f84\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SKIP_TS_CHECK_IN_START")," : ","[true|false]"," yarn start \u65f6, \u662f\u5426\u8df3\u8fc7 ts \u8bed\u6cd5\u68c0\u67e5\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SKIP_ESLINT_CHECK_IN_START")," : ","[true|false]"," yarn start \u65f6, \u662f\u5426\u8df3\u8fc7 eslint \u8bed\u6cd5\u68c0\u67e5\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"SKIP_NO_CHANGE_MODULE")," : \u662f\u5426\u8df3\u8fc7\u672a\u53d8\u66f4\u7684\u5b50\u6a21\u5757\u7f16\u8bd1"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"DISABLE_BUILD_DLL")," : ","[true|false]"," \u662f\u5426\u4e0d\u4f7f\u7528 dll"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NO_PROXY")," : ","[true|false]"," \u662f\u5426\u4e0d\u5f00\u542f mock \u63a5\u53e3"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GENERATE_SOURCEMAP")," : ","[true|false]"," \u662f\u5426\u751f\u6210 sourcemap"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"CUSTOMIZE_ICON_NAME")," : ",(0,a.kt)("a",{parentName:"li",href:"http://hzerodoc.saas.hand-china.com/zh/docs/development-guide/front-develop-guid/component/icons/"},"\u81ea\u5b9a\u4e49\u5b57\u4f53")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TRACE_LOG_ENABLE")," : ","[true|false]"," \u542f\u7528 TraceLog \u65e5\u5fd7\u8ffd\u6eaf\u5206\u6790"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"IM_ENABLE")," : ","[true|false]"," \u662f\u5426\u542f\u7528 IM"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"IM_WEBSOCKET_HOST")," : im \u670d\u52a1 websocket \u5730\u5740"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"WEBSOCKET_HOST")," : \u6d88\u606f\u901a\u77e5\u670d\u52a1 websocket \u5730\u5740"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"BUILD_PUBLIC_MS")," : ","[true|false]"," \u662f\u5426\u7f16\u8bd1\u5916\u90e8\u6a21\u5757"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"BUILD_DIST_PATH")," : ","[string]"," \u6307\u5b9a dist \u8f93\u51fa\u76ee\u5f55"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"BUILD_SKIP_PARENT")," : ","[true|false]"," \u5f3a\u5236\u8df3\u8fc7\u7236\u5de5\u7a0b\u7f16\u8bd1")),(0,a.kt)("h3",{id:"alias-\u914d\u7f6e"},"alias \u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const paths = require("hzero-webpack-scripts/config/paths");\nconst path = require("path");\n\nmodule.exports = {\n  "@common": path.resolve(paths.appRootPath, "packages", "tms-front/src"),\n  "@/assets": path.resolve(paths.appRootPath, "src/assets"),\n  "@": path.resolve(paths.appSrc),\n  "hzero-front/lib/index": path.resolve(__dirname, "emptyFile"),\n  "hzero-front/lib/utils/getConvertRouter":\n    "hzero-boot/lib/utils/getConvertRouter",\n  "core-js/library/fn": "core-js/features",\n  "hzero-boot-customize-init-config": path.resolve(\n    paths.appRootPath,\n    "packages",\n    "tms-front/lib/config/customize"\n  ),\n  components: "hzero-front/lib/components/",\n  utils: "hzero-front/lib/utils/",\n  services: "hzero-front/lib/services/",\n  tmsCommon: "tms-front/src/common",\n  tmsComponents: "tms-front/src/components",\n};\n')),(0,a.kt)("h3",{id:"\u76ee\u5f55\u7ed3\u6784"},"\u76ee\u5f55\u7ed3\u6784"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"sample    # \u9879\u76ee\u6839\u76ee\u5f55\n \u2523 packages  # \u5b50\u6a21\u5757\u6587\u4ef6\n \u2503 \u2523 sample-common    # \u6240\u6709\u5b50\u6a21\u5757\u7684\u516c\u5171\u4f9d\u8d56\u6a21\u5757\uff0c\u516c\u5171\u51fd\u6570\u548c\u7ec4\u4ef6\u53ef\u4ee5\u653e\u8fd9\u4e2a\u6a21\u5757\n \u2503 \u2503 \u2523 src    # \u9879\u76ee\u6e90\u7801\n \u2503 \u2503 \u2503 \u2523 assets   # \u516c\u5171 icons \u8d44\u6e90\uff0c\u5728\u9879\u76ee\u4e2d\u53ef\u4ee5\u901a\u8fc7 @/assets \u5f15\u7528\n \u2503 \u2503 \u2503 \u2503 \u2517 icons\n \u2503 \u2503 \u2503 \u2503 \u2503 \u2517 .gitkeep\n \u2503 \u2503 \u2503 \u2523 config   # \u516c\u5171\u914d\u7f6e\uff0c \u5bf9\u6240\u6709\u6a21\u5757\u751f\u6548\n \u2503 \u2503 \u2503 \u2503 \u2523 customize\n \u2503 \u2503 \u2503 \u2503 \u2503 \u2517 index.tsx    # \u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u914d\u7f6e hzero \u7684\u5168\u5c40\u914d\u7f6e\uff0c\u6bd4\u5982 \u5168\u5c40\u5361\u7247\u914d\u7f6e\uff0c\u5168\u5c40\u9519\u8bef\u914d\u7f6e\uff0cdva \u63d2\u4ef6\u914d\u7f6e \u7b49\u3002\n \u2503 \u2503 \u2503 \u2503 \u2517 commonConfig.ts    # \u516c\u5171\u63a5\u53e3\u524d\u7f00\u914d\u7f6e\u6587\u4ef6\n \u2503 \u2503 \u2503 \u2523 typings\n \u2503 \u2503 \u2503 \u2503 \u2517 global.d.ts    # \u5168\u5c40\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\n \u2503 \u2503 \u2503 \u2517 utils    # \u516c\u5171 utils\n \u2503 \u2503 \u2503 \u2503 \u2517 .gitkeep\n \u2503 \u2503 \u2523 lib    # src \u7684\u4ee3\u7801 \u751f\u6210\u7684\u53d1\u5e03\u6587\u4ef6\uff0c \u8fd0\u884c hzero-cli transpile\u5c06\u751f\u6210\u6539\u76ee\u5f55, \u6ce8\u610f\u4e24\u4e2a\u6a21\u5757\u4e4b\u95f4\u4f9d\u8d56\u6587\u4ef6\u90fd\u662f\u901a\u8fc7 lib\n \u2503 \u2503 \u2523 .babelrc.js    # \u8fd9\u91cc\u53ef\u4ee5\u4fee\u6539 babelrc \u914d\u7f6e\n \u2503 \u2503 \u2523 .gitignore\n \u2503 \u2503 \u2523 .npmrc   # \u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u914d\u7f6e npm registry\n \u2503 \u2503 \u2523 README.md\n \u2503 \u2503 \u2523 package.json\n \u2503 \u2503 \u2517 tsconfig.json\n \u2503 \u2523 sample-demo1   # \u5b9e\u4f8b\u5b50\u6a21\u5757\n \u2503 \u2503 \u2523 src\n \u2503 \u2503 \u2503 \u2523 config\n \u2503 \u2503 \u2503 \u2503 \u2517 routers.ts   # \u9875\u9762\u8def\u7531\u548c\u9875\u9762\u6587\u4ef6\u7684\u914d\u7f6e\n \u2503 \u2503 \u2503 \u2523 models   # dva model \u6587\u4ef6\n \u2503 \u2503 \u2503 \u2503 \u2523 .gitkeep\n \u2503 \u2503 \u2503 \u2503 \u2517 gitkeep.js\n \u2503 \u2503 \u2503 \u2523 routes   # \u9875\u9762\u7ec4\u4ef6\n \u2503 \u2503 \u2503 \u2503 \u2517 hello    # \u529f\u80fd\u7ec4\u7ec7\u6587\u4ef6\u5939\n \u2503 \u2503 \u2503 \u2503 \u2503 \u2517 HelloDemo1Page.tsx   # \u9875\u9762\u7ec4\u4ef6\u5efa\u8bae\u4ee5 Page.tsx \u7ed3\u5c3e\n \u2503 \u2503 \u2503 \u2523 typings\n \u2503 \u2503 \u2503 \u2503 \u2517 global.d.ts\n \u2503 \u2503 \u2503 \u2517 utils\n \u2503 \u2503 \u2503 \u2503 \u2517 router.tsx   # \u7236\u6a21\u5757\u52a0\u8f7d\u5b50\u6a21\u5757\u8def\u7531\u7684\u5165\u53e3\u6587\u4ef6\n \u2503 \u2503 \u2523 .babelrc.js\n \u2503 \u2503 \u2523 .gitignore\n \u2503 \u2503 \u2523 .hzerorc.json    # [\u5b50\u6a21\u5757\u7684\u5fae\u524d\u7aef\u914d\u7f6e](https://code.choerodon.com.cn/hft/hzero-front-demo/blob/master/docs/micro-front-refact.md)\n \u2503 \u2503 \u2523 .npmrc\n \u2503 \u2503 \u2523 README.md\n \u2503 \u2503 \u2523 package.json\n \u2503 \u2503 \u2517 tsconfig.json\n \u2503 \u2517 tsconfig.base.json\n \u2523 public\n \u2503 \u2517 .gitkeep\n \u2523 src\n \u2503 \u2523 config\n \u2503 \u2503 \u2523 .env.development.yml\n \u2503 \u2503 \u2523 .env.production.yml\n \u2503 \u2503 \u2523 .env.test.yml\n \u2503 \u2503 \u2523 .env.yml   # \u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6587\u4ef6\n \u2503 \u2503 \u2523 alias.js   # webpack import alias \u914d\u7f6e\u6587\u4ef6\n \u2503 \u2503 \u2517 theme.js   # less \u6837\u5f0f\u53d8\u91cf\u914d\u7f6e\n \u2503 \u2517 typings\n \u2503 \u2503 \u2517 global.d.ts\n \u2523 .babelrc.js     # \u8fd9\u91cc\u53ef\u4ee5\u4fee\u6539 babelrc \u914d\u7f6e\n \u2523 .ci.sh   # ci-cd shell \u811a\u672c demo\n \u2523 .dockerignore\n \u2523 .editorconfig\n \u2523 .eslintignore\n \u2523 .eslintrc.js\n \u2523 .gitignore\n \u2523 .hzerorc.json    # [\u7236\u6a21\u5757\u7684\u5fae\u524d\u7aef\u914d\u7f6e\u6587\u4ef6](https://code.choerodon.com.cn/hft/hzero-front-demo/blob/master/docs/micro-front-refact.md)\n \u2523 .npmrc\n \u2523 .prettierignore\n \u2523 .prettierrc\n \u2523 .stylelintrc\n \u2523 Dockerfile\n \u2523 README.md\n \u2523 jsconfig.json\n \u2523 lerna.json\n \u2523 package.json\n \u2517 tsconfig.json\n\n")),(0,a.kt)("h3",{id:"\u4ea7\u54c1\u73b0\u6709-packages-\u4ecb\u7ecd"},"\u4ea7\u54c1\u73b0\u6709 packages \u4ecb\u7ecd"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front")," : \u4e3b\u5305 \u516c\u6709\u65b9\u6cd5\u3001\u503c\u96c6\u786c\u7f16\u7801\u3001\u5b8f\u4ee3\u7801\u786c\u7f16\u7801\u3001\u516c\u5171\u7ec4\u4ef6"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-htms")," : \u57fa\u7840\u6570\u636e\u3001\u8fd0\u5355\u3001\u8ba2\u5355\u3001\u8ba1\u8d39\u3001\u6240\u6709\u7684\u5361\u7247\u7b49 tms \u4e1a\u52a1\u76f8\u5173\u529f\u80fd"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-hdms")," : \u56fd\u9645\u8d27\u8fd0\uff0c\u9a6c\u8fbe\u534f\u540c\u4e91"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-hpes")," : \u6d41\u7a0b\u5f15\u64ce\u76f8\u5173 \u529f\u80fd"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-packing")," : \u88c5\u7bb1\u529f\u80fd"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-hacs")," : \u4ed8\u8d39\u4ea7\u54c1\u529f\u80fd"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-industry")," : \u7f51\u7edc\u8d27\u8fd0"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-hfdi")," : \u8d44\u4ea7\u7684\u6e90\u7801\u5305 \u4e00\u822c\u4e0d\u52a8"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tms-front-homs")," : oms \u4ee3\u7801")),(0,a.kt)("h3",{id:"\u542f\u52a8"},"\u542f\u52a8"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5355\u6a21\u5757\u542f\u52a8: \u672c\u5730\u7f16\u8bd1\u8c03\u8bd5\u901f\u5ea6\u5feb"),(0,a.kt)("li",{parentName:"ol"},"\u5168\u6a21\u5757\u542f\u52a8: \u9002\u5408\u505a\u96c6\u6210\u6d4b\u8bd5")),(0,a.kt)("h4",{id:"1-\u5355\u6a21\u5757\u542f\u52a8"},"1. \u5355\u6a21\u5757\u542f\u52a8"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd packages/test-module1\nyarn run start\n")),(0,a.kt)("h4",{id:"2-\u5168\u6a21\u5757\u542f\u52a8"},"2. \u5168\u6a21\u5757\u542f\u52a8"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run build:ms # \u7f16\u8bd1\u5b50\u6a21\u5757\nyarn run start\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u5728\u7236\u9879\u76ee\u8fd0\u884c\u7684\u8bdd \uff0c\u7b2c\u4e00\u6b21 ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn start"),", \u662f\u4e0d\u4f1a\u6709\u9875\u9762\u7684",(0,a.kt)("br",{parentName:"p"}),"\n","\u9700\u8981\u8fd0\u884c\u4e00\u904d ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn run build:ms"),"\uff0c \u518d\u8fd0\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn start")," \u53ef\u4ee5\u6709\u9875\u9762",(0,a.kt)("br",{parentName:"p"}),"\n","\u5b50\u6a21\u5757\u4ee3\u7801\u53d8\u66f4\u4e4b\u540e\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u5230\u7236\u6a21\u5757\uff08\u8fd0\u884c ",(0,a.kt)("inlineCode",{parentName:"p"},"yarn run build:ms [\u5b50\u6a21\u5757\u540d]"),"\uff09\uff0c \u7236\u6a21\u5757\u542f\u52a8\u65f6\u624d\u4f1a\u770b\u5230\u6700\u65b0\u7684\u5b50\u6a21\u5757\u5185\u5bb9")),(0,a.kt)("h3",{id:"\u6253\u5305"},"\u6253\u5305"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'#!/usr/bin/env bash\n\n# jenkins \u811a\u672c\u6587\u4ef6\n\nset -e # \u62a5\u9519\u4e0d\u7ee7\u7eed\u6267\u884c\n\nexport BASE_PATH=BUILD_BASE_PATH\nexport API_HOST=BUILD_API_HOST\nexport CLIENT_ID=BUILD_CLIENT_ID\nexport WEBSOCKET_HOST=BUILD_WEBSOCKET_HOST\nexport PLATFORM_VERSION=BUILD_PLATFORM_VERSION\nexport BPM_HOST=BUILD_BPM_HOST\nexport IM_ENABLE=BUILD_IM_ENABLE\n\n# $UPDATE_MICRO_MODULES UPDATE_MICRO_MODULES \u53d8\u91cf\u5982\u679c\u5b58\u5728\u503c\u7684\u8bdd\u5c31 \u589e\u91cf\u66f4\u65b0\u5fae\u524d\u7aef\u5b50\u6a21\u5757\u3002\n\nif  [[ $UPDATE_MICRO_MODULES =~ "ALL" ]] || [[ ! -n "$UPDATE_MICRO_MODULES" ]] ;then\n    rm -rf yarn.lock\n    yarn install\n    yarn run build:dll\n    yarn run transpile # \u7f16\u8bd1\u5b50\u6a21\u5757\n    yarn build\nelse\n    echo \u589e\u91cf\u7f16\u8bd1\u5b50\u6a21\u5757 $UPDATE_MICRO_MODULES\n    yarn run build:ms $UPDATE_MICRO_MODULES\nfi\n\nrm -rf ./html\ncp -r ./dist ./html\n\nexport BUILD_BASE_PATH=/\nexport BUILD_API_HOST=http://backend.jd1.jajabjbj.top\nexport BUILD_CLIENT_ID=localhost\nexport BUILD_WFP_EDITOR=""\nexport BUILD_WEBSOCKET_HOST=ws://ws.jd1.jajabjbj.top\nexport BUILD_PLATFORM_VERSION=SAAS\nexport BUILD_BPM_HOST=http://bpm.jd1.jajabjbj.top\nexport BUILD_IM_ENABLE=false\nexport BUILD_IM_WEBSOCKET_HOST=ws://im.ws.jd1.jajabjbj.top\n\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_BASE_PATH $BUILD_BASE_PATH g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_API_HOST $BUILD_API_HOST g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_CLIENT_ID $BUILD_CLIENT_ID g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_BPM_HOST $BUILD_BPM_HOST g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_WFP_EDITOR $BUILD_WFP_EDITOR g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_WEBSOCKET_HOST $BUILD_WEBSOCKET_HOST g"\nfind ./html -name \'*.js\' | xargs sed -i "s BUILD_PLATFORM_VERSION $BUILD_PLATFORM_VERSION g"\n\n# \u8fd9\u91cc\u5b9e\u73b0\u4f60\u7684\u90e8\u7f72\u903b\u8f91 deploy ./html\n\n# export CICD_EXECUTION_SEQUENCE=${BUILD_NUMBER:-1}\n# docker build . -t  hzero-front-sample:${CICD_EXECUTION_SEQUENCE}\n# docker rm -f hzero-front-sample 2>/dev/null\n# docker run --rm -it --name hzero-front-sample hzero-front-sample:${CICD_EXECUTION_SEQUENCE}\n\nnpx serve html -s # \u6216\u8005 npx http-server html -P \u6d4b\u8bd5\u672c\u5730\u6253\u5305\u7684\u6587\u4ef6\n\n')),(0,a.kt)("h4",{id:"nginx-\u914d\u7f6e"},"NGINX \u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'   user  nginx;\n    worker_processes  1;\n\n    error_log  /var/log/nginx/error.log warn;\n    pid        /var/run/nginx.pid;\n\n\n    events {\n        worker_connections  1024;\n    }\n\n    http {\n        include       /etc/nginx/mime.types;\n        default_type  application/octet-stream;\n\n        log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                          \'$status $body_bytes_sent "$http_referer" \'\n                          \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n        access_log  /var/log/nginx/access.log  main;\n\n        sendfile        on;\n\n        keepalive_timeout  65;\n\n        gzip on;\n        gzip_buffers 32 4k;\n        gzip_comp_level 6;\n        gzip_min_length 200;\n        gzip_types text/css text/xml application/javascript;\n\n        server {\n            listen       80;\n            server_name  localhost;\n\n            location \\/[a-z.0-9]\\.(js|css|gif|png|jpg)$ {\n              expires    7d; # \u5f00\u542f eTag \u7f13\u5b58\n            }\n\n            location / {\n                root   /usr/share/nginx/html;\n                index  index.html index.htm;\n                try_files $uri /index.html; # \u542f\u52a8 404 failback to index.html\n            }\n\n            error_page   500 502 503 504  /50x.html;\n            location = /50x.html {\n                root   /usr/share/nginx/html;\n            }\n\n        }\n    }\n')),(0,a.kt)("h3",{id:"\u53d1\u5e03"},"\u53d1\u5e03"),(0,a.kt)("p",null,"\u8fd0\u884c\u5b8c\u6253\u5305\u4e4b\u540e html \u5c31\u662f\u9700\u8981\u53d1\u5e03\u7684\u6587\u4ef6\uff0c\u653e\u5230 nginx \u7684 html \u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u914d\u7f6e nginx \u5373\u53ef\u8fd0\u884c"))}c.isMDXComponent=!0}}]);